---
import { TORNEOS } from "@/consts/Torneos";
import Layout from "@/layouts/Layout.astro";
/* import fetchStrapi from "@/lib/Strapi";

const torneos = await fetchStrapi({
  endpoint: "torneos",
  wrappedByKey: "data",
});

console.log({ torneos }); */
---

<Layout title="Torneos">
  <div class="flex flex-col max-w-5xl mx-auto min-h-screen mt-16">
    <header class="relative z-10 flex flex-col justify-center h-full mb-12">
      <div class="flex items-center gap-x-4">
        <div
          class="relative animate-fade-in-up"
          style="--floating-duration: 5000ms"
        >
          <img
            src="/images/logo_salto.webp"
            alt="SaltoUruguayServer"
            class="size-20 md:size-24 w-auto object-contain aspect-square animate-sink animate-iteration-count-infinite animate-duration-[var(--floating-duration)] saturate-150"
          />
          <img
            src="/images/logo_salto.webp"
            alt="SaltoUruguayServer"
            class="absolute blur-md brightness-125 saturate-200 inset-0 size-20 md:size-24 w-auto object-contain aspect-square z-[-1] animate-sink animate-iteration-count-infinite animate-duration-[var(--floating-duration)]"
          />
        </div>
        <div class="flex flex-col justify-center">
          <h1
            class="text-3xl animate-fade-in-up animate-delay-150 font-rubik tracking-wider uppercase font-bold text-white mix-blend-screen"
          >
            Torneos
          </h1>
          <h2
            class="text-lg animate-fade-in-up animate-delay-300 font-rubik uppercase text-white mix-blend-screen mb-5"
          >
            ¡Participa en nuestros <span class="text-blue-400">torneos</span> y gana
            premios increíbles!
          </h2>
        </div>
      </div>
    </header>

    <masonry-layout maxcolwidth="500">
      {
        TORNEOS.map((torneo) => (
          <a
            class="flex flex-col h-56 w-full border-2 border-yellow-200 gap-4 rounded-lg shadow-md group relative overflow-hidden"
            href={`/torneos/${torneo.id}`}
          >
            <img
              src={torneo.banner}
              alt={torneo.name}
              class="w-full h-full object-cover rounded-lg absolute inset-0 -z-10 transition group-hover:scale-110 duration-500"
            />
            <div class="absolute w-full z-10 bottom-0 bg-gradient-to-b from-transparent to-blue-700/90 p-4 rounded-lg">
              <h3 class="text-2xl font-bold text-white">{torneo.name}</h3>
              <p class="text-lg text-brand-gray">""</p>
            </div>
          </a>
        ))
      }
    </masonry-layout>
  </div>
</Layout>

<script>
  import { $ } from "@/lib/dom-selector";
  import "@appnest/masonry-layout";
  import { type MasonryLayout } from "@appnest/masonry-layout";

  document.addEventListener("astro:page-load", () => {
    const $masonryLayout = $("masonry-layout") as MasonryLayout;

    $masonryLayout.layout();
  });
</script>
