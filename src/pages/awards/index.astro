---
export const prerender = false;
import LastEditionWinners from "@/components/LastEditionWinners.astro";
import VerticalVideoPlayer from "@/components/VerticalVideoPlayer.astro";
import Layout from "@/layouts/Layout.astro";
import { AWARDS_VOTES_RESULT } from "@/data/awards-winners";
import { IS_VOTES_OPEN, VOTES_OPEN_TIMESTAMP } from "@/config";
import LaunchCountdown from "@/components/LaunchCountdown";

console.log({ IS_VOTES_OPEN: IS_VOTES_OPEN() });
---

<Layout title="SaltoAwards">
  <div id="backdrop-awards" class="-mt-28 min-h-screen absolute inset-0 -z-10">
  </div>
  <div class="flex flex-col max-w-5xl mx-auto min-h-screen mt-16">
    <header
      class="relative z-10 flex flex-col items-center justify-center h-full text-center max-w-4xl mx-auto"
    >
      <div class="relative animate-fade-in-up">
        <img
          src="/images/logo_salto.webp"
          alt="SaltoUruguayServer"
          class="h-24 sm:h-32 md:h-40 w-auto object-contain aspect-square"
        />
        <img
          src="/images/logo_salto.webp"
          alt="SaltoUruguayServer"
          class="absolute blur-md transform scale-110 animate-pulsing animate-iteration-count-infinite animate-duration-[3000ms] saturate-150 z-[-1] top-0 left-0 h-24 sm:h-32 md:h-40 w-auto object-contain aspect-square"
        />
      </div>
      <h1
        class="text-4xl animate-fade-in-up animate-delay-150 font-rubik tracking-wider uppercase font-bold text-white mix-blend-screen mt-8"
        data-astro-cid-x5yigsle=""
      >
        #SaltoAwards
      </h1>
      <h2
        class="text-xl animate-fade-in-up animate-delay-300 font-rubik tracking-wider uppercase font-medium text-white mix-blend-screen my-5 pb-10"
        data-astro-cid-x5yigsle=""
      >
        ¡La entrega de premios <span class="text-yellow-500">más esperada</span>
        del año!
      </h2>
    </header>

    {
      IS_VOTES_OPEN() ? (
        <section
          id="active-edition"
          class="flex flex-col items-center justify-center mt-8"
        >
          <h2 class="text-2xl font-rubik tracking-wider uppercase font-bold text-white mix-blend-screen my-5">
            Edición en curso
          </h2>
          <p class="text-white">
            ¡La votación está abierta! Participa y elige a tus favoritos.
          </p>
          {/*  <LaunchCountdown
            timestamp={VOTES_OPEN_TIMESTAMP}
            showCalendarButton={false}
            classNames={{ timeDisplay: "text-yellow-400" }}
          /> */}
          <div class="mt-6">
            <a
              href="/awards/vota"
              class="px-4 py-2 bg-yellow-500 text-black rounded font-bold"
            >
              Votar ahora
            </a>
          </div>
          <div class="mt-12 w-full text-center">
            <a href="/awards/" class="text-white underline">
              Ver ediciones anteriores
            </a>
          </div>
        </section>
      ) : (
        <>
          {/* Contador con la cuenta regresiva */}

          <p class="text-white text-center max-w-xl mx-auto">
            Las votaciones para los{" "}
            <span class="text-yellow-500 font-bold">#SaltoAwards2025</span> aún
            no han comenzado. ¡Prepárate para elegir a tus favoritos y ser parte
            de esta celebración única!
          </p>
          <LaunchCountdown
            timestamp={VOTES_OPEN_TIMESTAMP}
            showCalendarButton={false}
            classNames={{ timeDisplay: "text-yellow-400" }}
            client:idle
          />

          <LastEditionWinners class:list={"mt-16"} />

          <section class="mt-10 w-full max-w-5xl mx-auto">
            <h3 class="text-lg font-rubik tracking-wider uppercase font-bold text-white mix-blend-screen text-center mb-4">
              Ediciones anteriores
            </h3>
            <div class="flex flex-wrap justify-center gap-3">
              {Object.keys(AWARDS_VOTES_RESULT).map((y) => {
                const year = Number(y);
                return (
                  <a
                    href={`/awards/${year}`}
                    class="px-3 py-2 bg-white/5 hover:bg-white/10 rounded text-white"
                  >
                    {year}
                  </a>
                );
              })}
            </div>
          </section>
        </>
      )
    }

    <!--  <section
      id="casters"
      class="flex flex-col items-center justify-center h-full text-center max-w-4xl mx-auto mt-16"
    >
      <h2
        class="text-2xl font-rubik tracking-wider uppercase font-bold text-white mix-blend-screen my-5"
      >
        ¡Conoce a los presentadores!
      </h2>
      <p
        class="text-white text-lg font-rubik uppercase text-balance tracking-wider sm:pb-10 pb-4"
      >
        <span class="text-yellow-500">#SaltoAwards</span> no sería lo mismo sin nuestros
        presentadores.<br />¡Conócelos!
      </p>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div class="flex flex-col items-center justify-center gap-2">
          <img
            src="/images/casters/salto.webp"
            alt="Salto Uruguay"
            class="w-24 h-24 rounded-full object-cover"
          />
          <h3
            class="text-lg font-rubik tracking-wider uppercase font-bold text-white mix-blend-screen"
          >
            Salto Uruguay
          </h3>
        </div>
        <div class="flex flex-col items-center justify-center gap-2">
          <img
            src="/images/casters/julianmartin.webp"
            alt="Julian Martin"
            class="w-24 h-24 rounded-full object-cover"
          />
          <h3
            class="text-lg font-rubik tracking-wider uppercase font-bold text-white mix-blend-screen"
          >
            Julian Martin
          </h3>
        </div>
      </div>
    </section>

    <section
      id="live-show"
      class="flex flex-col items-center justify-center h-full text-center max-w-4xl mx-auto mt-16"
    >
      <h2
        class="text-2xl font-rubik tracking-wider uppercase font-bold text-white mix-blend-screen my-5"
      >
        Contaremos con un show en vivo
      </h2>
      <p
        class="text-white text-lg font-rubik uppercase text-balance tracking-wider sm:pb-10 pb-4"
      >
        Por parte del ganador de <span class="text-yellow-500"
          >#LaVozArgentina2018</span
        > ¡No te lo pierdas!
      </p>

      <VerticalVideoPlayer
        videoSrc="https://cdn.saltouruguayserver.com/braulio.webm"
        placeholder="/images/braulio.webp"
      />
    </section> -->
  </div>
  <style>
    #backdrop-awards {
      background-image: url("/images/awards-fondo.webp");
      @apply saturate-150 opacity-55;
      mask-image: linear-gradient(
        black 0%,
        rgba(0, 0, 0, 0.5) 30%,
        rgba(0, 0, 0, 0.1) 50%,
        transparent
      );
      background-size: cover;
      background-position: center;
    }
  </style>

  <script>
    import { $ } from "@/lib/dom-selector";
    import { showSignInDialog } from "@/lib/utils";

    document.addEventListener("astro:page-load", () => {
      const $viewNominees = $("div[data-login-on-click]");
      if ($viewNominees) {
        $viewNominees.addEventListener("click", (e) => {
          showSignInDialog();
        });
      }
    });
  </script>
</Layout>
