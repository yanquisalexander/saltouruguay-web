---
import Layout from "@/layouts/Layout.astro";

/* 游댳 Fallback si todav칤a no hay datos guardados */
const fallbackGroups = {
  A: ["anti-therian","que-pelota-gerson","desertores-cubicos","fuerza-torales"],
  B: ["la-141","los-changos","los-sin-pelo","mate-&-taco"],
  C: ["puskas","ss","team-fzbr","therian-&-furious"],
  D: ["toxicos-a-la-pala","vasacorrer","x-force","yen"]
};
---

<Layout title="Resultados del Sorteo" mainClassname="px-6 sm:px-10 pt-24 pb-32">
  <section class="max-w-6xl mx-auto">

    <!-- T칈TULO -->
    <div class="text-center mb-12">
      <p class="uppercase tracking-[0.1em] text-4xl md:text-6xl font-anton font-bold mb-2 text-white drop-shadow-lg">
        TORNEO ROCKET LEAGUE
      </p>

      <h1 class="font-anton text-4xl md:text-5xl mt-2 bg-gradient-to-r from-amber-400 to-yellow-300 bg-clip-text text-transparent">
        Resultados del Sorteo
      </h1>
    </div>

    <!-- GRUPOS -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">

      {Object.entries(fallbackGroups).map(([group, teams]) => (
        <div class="rounded-2xl border border-white/10 bg-white/5 p-8 shadow-lg">
          <h2 class="text-center font-bold text-2xl md:text-3xl text-amber-300 mb-6">
            Grupo {group}
          </h2>

          <ul id={`group-${group}`} class="space-y-3">
            {teams.map(team => (
              <li class="teamRow">
                <img
                  src={`/images/team-logos/${team}.webp`}
                  alt={team}
                  class="teamLogoFixed"
                />
                <span class="teamName">{team}</span>
              </li>
            ))}
          </ul>
        </div>
      ))}

    </div>

  </section>

<script>
document.addEventListener("DOMContentLoaded", ()=>{

  const raw = localStorage.getItem("drawResults");
  if(!raw) return;

  let groups;
  try {
    groups = JSON.parse(raw);
  } catch(e){
    return;
  }

  Object.entries(groups).forEach(([group, teams])=>{
    const container = document.getElementById(`group-${group}`);
    if(!container) return;

    container.innerHTML = "";

    teams.forEach(team=>{
      const li = document.createElement("li");
      li.className = "teamRow";

      li.innerHTML = `
        <img src="/images/team-logos/${team}.webp" class="teamLogoFixed" />
        <span class="teamName">${team}</span>
      `;

      container.appendChild(li);
    });
  });

});
</script>

<style>
.teamRow {
  display: flex;
  align-items: center;       /* centra vertical */
  gap: 12px;
  height: 60px;              /* altura uniforme un poco m치s grande */
  padding: 0 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.1);
  background: rgba(255,255,255,0.05);
  overflow: hidden;
}

.teamLogoFixed {
  width: 48px;               /* logo m치s peque침o y consistente */
  height: 48px;
  object-fit: contain;
  flex-shrink: 0;
}

.teamName {
  flex: 1;                   /* ocupa todo el espacio restante */
  font-weight: 700;
  font-size: 1.25rem;        /* texto m치s grande */
  display: flex;
  align-items: center;       /* centra vertical */
  justify-content: flex-start; 
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;   /* corta nombres largos */
}
</style>

</Layout>
